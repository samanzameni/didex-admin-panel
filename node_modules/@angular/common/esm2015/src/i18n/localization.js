/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
import { Inject, Injectable, InjectionToken, LOCALE_ID, Optional } from '@angular/core';
import { Plural, getLocalePluralCase } from './locale_data_api';
/**
 * @deprecated from v5
 * @type {?}
 */
import * as ɵngcc0 from '@angular/core';
export const DEPRECATED_PLURAL_FN = new InjectionToken('UseV4Plurals');
/**
 * \@publicApi
 * @abstract
 */
export class NgLocalization {
}
if (false) {
    /**
     * @abstract
     * @param {?} value
     * @param {?=} locale
     * @return {?}
     */
    NgLocalization.prototype.getPluralCategory = function (value, locale) { };
}
/**
 * Returns the plural category for a given value.
 * - "=value" when the case exists,
 * - the plural category otherwise
 * @param {?} value
 * @param {?} cases
 * @param {?} ngLocalization
 * @param {?=} locale
 * @return {?}
 */
export function getPluralCategory(value, cases, ngLocalization, locale) {
    /** @type {?} */
    let key = `=${value}`;
    if (cases.indexOf(key) > -1) {
        return key;
    }
    key = ngLocalization.getPluralCategory(value, locale);
    if (cases.indexOf(key) > -1) {
        return key;
    }
    if (cases.indexOf('other') > -1) {
        return 'other';
    }
    throw new Error(`No plural message found for value "${value}"`);
}
/**
 * Returns the plural case based on the locale
 *
 * \@publicApi
 */
export class NgLocaleLocalization extends NgLocalization {
    /**
     * @param {?} locale
     * @param {?=} deprecatedPluralFn
     */
    constructor(locale, deprecatedPluralFn) {
        super();
        this.locale = locale;
        this.deprecatedPluralFn = deprecatedPluralFn;
    }
    /**
     * @param {?} value
     * @param {?=} locale
     * @return {?}
     */
    getPluralCategory(value, locale) {
        /** @type {?} */
        const plural = this.deprecatedPluralFn ? this.deprecatedPluralFn(locale || this.locale, value) :
            getLocalePluralCase(locale || this.locale)(value);
        switch (plural) {
            case Plural.Zero:
                return 'zero';
            case Plural.One:
                return 'one';
            case Plural.Two:
                return 'two';
            case Plural.Few:
                return 'few';
            case Plural.Many:
                return 'many';
            default:
                return 'other';
        }
    }
}
NgLocaleLocalization.ngInjectableDef = ɵngcc0.ɵɵdefineInjectable({ token: NgLocaleLocalization, factory: function NgLocaleLocalization_Factory(t) { return new (t || NgLocaleLocalization)(ɵngcc0.ɵɵinject(LOCALE_ID), ɵngcc0.ɵɵinject(DEPRECATED_PLURAL_FN, 8)); }, providedIn: null });
/*@__PURE__*/ ɵngcc0.ɵsetClassMetadata(NgLocaleLocalization, [{
        type: Injectable
    }], function () { return [{ type: String, decorators: [{
                type: Inject,
                args: [LOCALE_ID]
            }] }, { type: undefined, decorators: [{
                type: Optional
            }, {
                type: Inject,
                args: [DEPRECATED_PLURAL_FN]
            }] }]; }, { constructor: [], locale: [], deprecatedPluralFn: [], getPluralCategory: [] });
/** @nocollapse */
NgLocaleLocalization.ctorParameters = () => [
    { type: String, decorators: [{ type: Inject, args: [LOCALE_ID,] }] },
    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [DEPRECATED_PLURAL_FN,] }] }
];
if (false) {
    /**
     * @type {?}
     * @protected
     */
    NgLocaleLocalization.prototype.locale;
    /**
     * @deprecated from v5
     * @type {?}
     * @protected
     */
    NgLocaleLocalization.prototype.deprecatedPluralFn;
}
/**
 * Returns the plural case based on the locale
 *
 * @deprecated from v5 the plural case function is in locale data files common/locales/*.ts
 * \@publicApi
 * @param {?} locale
 * @param {?} nLike
 * @return {?}
 */
export function getPluralCase(locale, nLike) {
    // TODO(vicb): lazy compute
    if (typeof nLike === 'string') {
        nLike = parseInt((/** @type {?} */ (nLike)), 10);
    }
    /** @type {?} */
    const n = (/** @type {?} */ (nLike));
    /** @type {?} */
    const nDecimal = n.toString().replace(/^[^.]*\.?/, '');
    /** @type {?} */
    const i = Math.floor(Math.abs(n));
    /** @type {?} */
    const v = nDecimal.length;
    /** @type {?} */
    const f = parseInt(nDecimal, 10);
    /** @type {?} */
    const t = parseInt(n.toString().replace(/^[^.]*\.?|0+$/g, ''), 10) || 0;
    /** @type {?} */
    const lang = locale.split('-')[0].toLowerCase();
    switch (lang) {
        case 'af':
        case 'asa':
        case 'az':
        case 'bem':
        case 'bez':
        case 'bg':
        case 'brx':
        case 'ce':
        case 'cgg':
        case 'chr':
        case 'ckb':
        case 'ee':
        case 'el':
        case 'eo':
        case 'es':
        case 'eu':
        case 'fo':
        case 'fur':
        case 'gsw':
        case 'ha':
        case 'haw':
        case 'hu':
        case 'jgo':
        case 'jmc':
        case 'ka':
        case 'kk':
        case 'kkj':
        case 'kl':
        case 'ks':
        case 'ksb':
        case 'ky':
        case 'lb':
        case 'lg':
        case 'mas':
        case 'mgo':
        case 'ml':
        case 'mn':
        case 'nb':
        case 'nd':
        case 'ne':
        case 'nn':
        case 'nnh':
        case 'nyn':
        case 'om':
        case 'or':
        case 'os':
        case 'ps':
        case 'rm':
        case 'rof':
        case 'rwk':
        case 'saq':
        case 'seh':
        case 'sn':
        case 'so':
        case 'sq':
        case 'ta':
        case 'te':
        case 'teo':
        case 'tk':
        case 'tr':
        case 'ug':
        case 'uz':
        case 'vo':
        case 'vun':
        case 'wae':
        case 'xog':
            if (n === 1)
                return Plural.One;
            return Plural.Other;
        case 'ak':
        case 'ln':
        case 'mg':
        case 'pa':
        case 'ti':
            if (n === Math.floor(n) && n >= 0 && n <= 1)
                return Plural.One;
            return Plural.Other;
        case 'am':
        case 'as':
        case 'bn':
        case 'fa':
        case 'gu':
        case 'hi':
        case 'kn':
        case 'mr':
        case 'zu':
            if (i === 0 || n === 1)
                return Plural.One;
            return Plural.Other;
        case 'ar':
            if (n === 0)
                return Plural.Zero;
            if (n === 1)
                return Plural.One;
            if (n === 2)
                return Plural.Two;
            if (n % 100 === Math.floor(n % 100) && n % 100 >= 3 && n % 100 <= 10)
                return Plural.Few;
            if (n % 100 === Math.floor(n % 100) && n % 100 >= 11 && n % 100 <= 99)
                return Plural.Many;
            return Plural.Other;
        case 'ast':
        case 'ca':
        case 'de':
        case 'en':
        case 'et':
        case 'fi':
        case 'fy':
        case 'gl':
        case 'it':
        case 'nl':
        case 'sv':
        case 'sw':
        case 'ur':
        case 'yi':
            if (i === 1 && v === 0)
                return Plural.One;
            return Plural.Other;
        case 'be':
            if (n % 10 === 1 && !(n % 100 === 11))
                return Plural.One;
            if (n % 10 === Math.floor(n % 10) && n % 10 >= 2 && n % 10 <= 4 &&
                !(n % 100 >= 12 && n % 100 <= 14))
                return Plural.Few;
            if (n % 10 === 0 || n % 10 === Math.floor(n % 10) && n % 10 >= 5 && n % 10 <= 9 ||
                n % 100 === Math.floor(n % 100) && n % 100 >= 11 && n % 100 <= 14)
                return Plural.Many;
            return Plural.Other;
        case 'br':
            if (n % 10 === 1 && !(n % 100 === 11 || n % 100 === 71 || n % 100 === 91))
                return Plural.One;
            if (n % 10 === 2 && !(n % 100 === 12 || n % 100 === 72 || n % 100 === 92))
                return Plural.Two;
            if (n % 10 === Math.floor(n % 10) && (n % 10 >= 3 && n % 10 <= 4 || n % 10 === 9) &&
                !(n % 100 >= 10 && n % 100 <= 19 || n % 100 >= 70 && n % 100 <= 79 ||
                    n % 100 >= 90 && n % 100 <= 99))
                return Plural.Few;
            if (!(n === 0) && n % 1e6 === 0)
                return Plural.Many;
            return Plural.Other;
        case 'bs':
        case 'hr':
        case 'sr':
            if (v === 0 && i % 10 === 1 && !(i % 100 === 11) || f % 10 === 1 && !(f % 100 === 11))
                return Plural.One;
            if (v === 0 && i % 10 === Math.floor(i % 10) && i % 10 >= 2 && i % 10 <= 4 &&
                !(i % 100 >= 12 && i % 100 <= 14) ||
                f % 10 === Math.floor(f % 10) && f % 10 >= 2 && f % 10 <= 4 &&
                    !(f % 100 >= 12 && f % 100 <= 14))
                return Plural.Few;
            return Plural.Other;
        case 'cs':
        case 'sk':
            if (i === 1 && v === 0)
                return Plural.One;
            if (i === Math.floor(i) && i >= 2 && i <= 4 && v === 0)
                return Plural.Few;
            if (!(v === 0))
                return Plural.Many;
            return Plural.Other;
        case 'cy':
            if (n === 0)
                return Plural.Zero;
            if (n === 1)
                return Plural.One;
            if (n === 2)
                return Plural.Two;
            if (n === 3)
                return Plural.Few;
            if (n === 6)
                return Plural.Many;
            return Plural.Other;
        case 'da':
            if (n === 1 || !(t === 0) && (i === 0 || i === 1))
                return Plural.One;
            return Plural.Other;
        case 'dsb':
        case 'hsb':
            if (v === 0 && i % 100 === 1 || f % 100 === 1)
                return Plural.One;
            if (v === 0 && i % 100 === 2 || f % 100 === 2)
                return Plural.Two;
            if (v === 0 && i % 100 === Math.floor(i % 100) && i % 100 >= 3 && i % 100 <= 4 ||
                f % 100 === Math.floor(f % 100) && f % 100 >= 3 && f % 100 <= 4)
                return Plural.Few;
            return Plural.Other;
        case 'ff':
        case 'fr':
        case 'hy':
        case 'kab':
            if (i === 0 || i === 1)
                return Plural.One;
            return Plural.Other;
        case 'fil':
            if (v === 0 && (i === 1 || i === 2 || i === 3) ||
                v === 0 && !(i % 10 === 4 || i % 10 === 6 || i % 10 === 9) ||
                !(v === 0) && !(f % 10 === 4 || f % 10 === 6 || f % 10 === 9))
                return Plural.One;
            return Plural.Other;
        case 'ga':
            if (n === 1)
                return Plural.One;
            if (n === 2)
                return Plural.Two;
            if (n === Math.floor(n) && n >= 3 && n <= 6)
                return Plural.Few;
            if (n === Math.floor(n) && n >= 7 && n <= 10)
                return Plural.Many;
            return Plural.Other;
        case 'gd':
            if (n === 1 || n === 11)
                return Plural.One;
            if (n === 2 || n === 12)
                return Plural.Two;
            if (n === Math.floor(n) && (n >= 3 && n <= 10 || n >= 13 && n <= 19))
                return Plural.Few;
            return Plural.Other;
        case 'gv':
            if (v === 0 && i % 10 === 1)
                return Plural.One;
            if (v === 0 && i % 10 === 2)
                return Plural.Two;
            if (v === 0 &&
                (i % 100 === 0 || i % 100 === 20 || i % 100 === 40 || i % 100 === 60 || i % 100 === 80))
                return Plural.Few;
            if (!(v === 0))
                return Plural.Many;
            return Plural.Other;
        case 'he':
            if (i === 1 && v === 0)
                return Plural.One;
            if (i === 2 && v === 0)
                return Plural.Two;
            if (v === 0 && !(n >= 0 && n <= 10) && n % 10 === 0)
                return Plural.Many;
            return Plural.Other;
        case 'is':
            if (t === 0 && i % 10 === 1 && !(i % 100 === 11) || !(t === 0))
                return Plural.One;
            return Plural.Other;
        case 'ksh':
            if (n === 0)
                return Plural.Zero;
            if (n === 1)
                return Plural.One;
            return Plural.Other;
        case 'kw':
        case 'naq':
        case 'se':
        case 'smn':
            if (n === 1)
                return Plural.One;
            if (n === 2)
                return Plural.Two;
            return Plural.Other;
        case 'lag':
            if (n === 0)
                return Plural.Zero;
            if ((i === 0 || i === 1) && !(n === 0))
                return Plural.One;
            return Plural.Other;
        case 'lt':
            if (n % 10 === 1 && !(n % 100 >= 11 && n % 100 <= 19))
                return Plural.One;
            if (n % 10 === Math.floor(n % 10) && n % 10 >= 2 && n % 10 <= 9 &&
                !(n % 100 >= 11 && n % 100 <= 19))
                return Plural.Few;
            if (!(f === 0))
                return Plural.Many;
            return Plural.Other;
        case 'lv':
        case 'prg':
            if (n % 10 === 0 || n % 100 === Math.floor(n % 100) && n % 100 >= 11 && n % 100 <= 19 ||
                v === 2 && f % 100 === Math.floor(f % 100) && f % 100 >= 11 && f % 100 <= 19)
                return Plural.Zero;
            if (n % 10 === 1 && !(n % 100 === 11) || v === 2 && f % 10 === 1 && !(f % 100 === 11) ||
                !(v === 2) && f % 10 === 1)
                return Plural.One;
            return Plural.Other;
        case 'mk':
            if (v === 0 && i % 10 === 1 || f % 10 === 1)
                return Plural.One;
            return Plural.Other;
        case 'mt':
            if (n === 1)
                return Plural.One;
            if (n === 0 || n % 100 === Math.floor(n % 100) && n % 100 >= 2 && n % 100 <= 10)
                return Plural.Few;
            if (n % 100 === Math.floor(n % 100) && n % 100 >= 11 && n % 100 <= 19)
                return Plural.Many;
            return Plural.Other;
        case 'pl':
            if (i === 1 && v === 0)
                return Plural.One;
            if (v === 0 && i % 10 === Math.floor(i % 10) && i % 10 >= 2 && i % 10 <= 4 &&
                !(i % 100 >= 12 && i % 100 <= 14))
                return Plural.Few;
            if (v === 0 && !(i === 1) && i % 10 === Math.floor(i % 10) && i % 10 >= 0 && i % 10 <= 1 ||
                v === 0 && i % 10 === Math.floor(i % 10) && i % 10 >= 5 && i % 10 <= 9 ||
                v === 0 && i % 100 === Math.floor(i % 100) && i % 100 >= 12 && i % 100 <= 14)
                return Plural.Many;
            return Plural.Other;
        case 'pt':
            if (n === Math.floor(n) && n >= 0 && n <= 2 && !(n === 2))
                return Plural.One;
            return Plural.Other;
        case 'ro':
            if (i === 1 && v === 0)
                return Plural.One;
            if (!(v === 0) || n === 0 ||
                !(n === 1) && n % 100 === Math.floor(n % 100) && n % 100 >= 1 && n % 100 <= 19)
                return Plural.Few;
            return Plural.Other;
        case 'ru':
        case 'uk':
            if (v === 0 && i % 10 === 1 && !(i % 100 === 11))
                return Plural.One;
            if (v === 0 && i % 10 === Math.floor(i % 10) && i % 10 >= 2 && i % 10 <= 4 &&
                !(i % 100 >= 12 && i % 100 <= 14))
                return Plural.Few;
            if (v === 0 && i % 10 === 0 ||
                v === 0 && i % 10 === Math.floor(i % 10) && i % 10 >= 5 && i % 10 <= 9 ||
                v === 0 && i % 100 === Math.floor(i % 100) && i % 100 >= 11 && i % 100 <= 14)
                return Plural.Many;
            return Plural.Other;
        case 'shi':
            if (i === 0 || n === 1)
                return Plural.One;
            if (n === Math.floor(n) && n >= 2 && n <= 10)
                return Plural.Few;
            return Plural.Other;
        case 'si':
            if (n === 0 || n === 1 || i === 0 && f === 1)
                return Plural.One;
            return Plural.Other;
        case 'sl':
            if (v === 0 && i % 100 === 1)
                return Plural.One;
            if (v === 0 && i % 100 === 2)
                return Plural.Two;
            if (v === 0 && i % 100 === Math.floor(i % 100) && i % 100 >= 3 && i % 100 <= 4 || !(v === 0))
                return Plural.Few;
            return Plural.Other;
        case 'tzm':
            if (n === Math.floor(n) && n >= 0 && n <= 1 || n === Math.floor(n) && n >= 11 && n <= 99)
                return Plural.One;
            return Plural.Other;
        // When there is no specification, the default is always "other"
        // Spec: http://cldr.unicode.org/index/cldr-spec/plural-rules
        // > other (required—general plural form — also used if the language only has a single form)
        default:
            return Plural.Other;
    }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImQ6L0FuZ3VsYXIgUHJvamVjdC9EaWRleC9kaWRleC1hZG1pbi1wYW5lbC9ub2RlX21vZHVsZXMvQGFuZ3VsYXIvY29tbW9uL2VzbTIwMTUvc3JjL2kxOG4vbG9jYWxpemF0aW9uLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFpQkE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBZ0ZDLHFHQUdDIiwiZmlsZSI6ImxvY2FsaXphdGlvbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBAZmlsZW92ZXJ2aWV3IGFkZGVkIGJ5IHRzaWNrbGVcclxuICogQHN1cHByZXNzIHtjaGVja1R5cGVzLGNvbnN0YW50UHJvcGVydHksZXh0cmFSZXF1aXJlLG1pc3NpbmdPdmVycmlkZSxtaXNzaW5nUmV0dXJuLHVudXNlZFByaXZhdGVNZW1iZXJzLHVzZWxlc3NDb2RlfSBjaGVja2VkIGJ5IHRzY1xyXG4gKi9cclxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxyXG4gKlxyXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxyXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXHJcbiAqL1xyXG5pbXBvcnQgeyBJbmplY3QsIEluamVjdGFibGUsIEluamVjdGlvblRva2VuLCBMT0NBTEVfSUQsIE9wdGlvbmFsIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFBsdXJhbCwgZ2V0TG9jYWxlUGx1cmFsQ2FzZSB9IGZyb20gJy4vbG9jYWxlX2RhdGFfYXBpJztcclxuLyoqXHJcbiAqIEBkZXByZWNhdGVkIGZyb20gdjVcclxuICogQHR5cGUgez99XHJcbiAqL1xyXG5leHBvcnQgY29uc3QgREVQUkVDQVRFRF9QTFVSQUxfRk4gPSBuZXcgSW5qZWN0aW9uVG9rZW4oJ1VzZVY0UGx1cmFscycpO1xyXG4vKipcclxuICogXFxAcHVibGljQXBpXHJcbiAqIEBhYnN0cmFjdFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE5nTG9jYWxpemF0aW9uIHtcclxufVxyXG5pZiAoZmFsc2UpIHtcclxuICAgIC8qKlxyXG4gICAgICogQGFic3RyYWN0XHJcbiAgICAgKiBAcGFyYW0gez99IHZhbHVlXHJcbiAgICAgKiBAcGFyYW0gez89fSBsb2NhbGVcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5nTG9jYWxpemF0aW9uLnByb3RvdHlwZS5nZXRQbHVyYWxDYXRlZ29yeSA9IGZ1bmN0aW9uICh2YWx1ZSwgbG9jYWxlKSB7IH07XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgdGhlIHBsdXJhbCBjYXRlZ29yeSBmb3IgYSBnaXZlbiB2YWx1ZS5cclxuICogLSBcIj12YWx1ZVwiIHdoZW4gdGhlIGNhc2UgZXhpc3RzLFxyXG4gKiAtIHRoZSBwbHVyYWwgY2F0ZWdvcnkgb3RoZXJ3aXNlXHJcbiAqIEBwYXJhbSB7P30gdmFsdWVcclxuICogQHBhcmFtIHs/fSBjYXNlc1xyXG4gKiBAcGFyYW0gez99IG5nTG9jYWxpemF0aW9uXHJcbiAqIEBwYXJhbSB7Pz19IGxvY2FsZVxyXG4gKiBAcmV0dXJuIHs/fVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFBsdXJhbENhdGVnb3J5KHZhbHVlLCBjYXNlcywgbmdMb2NhbGl6YXRpb24sIGxvY2FsZSkge1xyXG4gICAgLyoqIEB0eXBlIHs/fSAqL1xyXG4gICAgbGV0IGtleSA9IGA9JHt2YWx1ZX1gO1xyXG4gICAgaWYgKGNhc2VzLmluZGV4T2Yoa2V5KSA+IC0xKSB7XHJcbiAgICAgICAgcmV0dXJuIGtleTtcclxuICAgIH1cclxuICAgIGtleSA9IG5nTG9jYWxpemF0aW9uLmdldFBsdXJhbENhdGVnb3J5KHZhbHVlLCBsb2NhbGUpO1xyXG4gICAgaWYgKGNhc2VzLmluZGV4T2Yoa2V5KSA+IC0xKSB7XHJcbiAgICAgICAgcmV0dXJuIGtleTtcclxuICAgIH1cclxuICAgIGlmIChjYXNlcy5pbmRleE9mKCdvdGhlcicpID4gLTEpIHtcclxuICAgICAgICByZXR1cm4gJ290aGVyJztcclxuICAgIH1cclxuICAgIHRocm93IG5ldyBFcnJvcihgTm8gcGx1cmFsIG1lc3NhZ2UgZm91bmQgZm9yIHZhbHVlIFwiJHt2YWx1ZX1cImApO1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSBwbHVyYWwgY2FzZSBiYXNlZCBvbiB0aGUgbG9jYWxlXHJcbiAqXHJcbiAqIFxcQHB1YmxpY0FwaVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE5nTG9jYWxlTG9jYWxpemF0aW9uIGV4dGVuZHMgTmdMb2NhbGl6YXRpb24ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gez99IGxvY2FsZVxyXG4gICAgICogQHBhcmFtIHs/PX0gZGVwcmVjYXRlZFBsdXJhbEZuXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGxvY2FsZSwgZGVwcmVjYXRlZFBsdXJhbEZuKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLmxvY2FsZSA9IGxvY2FsZTtcclxuICAgICAgICB0aGlzLmRlcHJlY2F0ZWRQbHVyYWxGbiA9IGRlcHJlY2F0ZWRQbHVyYWxGbjtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHs/fSB2YWx1ZVxyXG4gICAgICogQHBhcmFtIHs/PX0gbG9jYWxlXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBnZXRQbHVyYWxDYXRlZ29yeSh2YWx1ZSwgbG9jYWxlKSB7XHJcbiAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xyXG4gICAgICAgIGNvbnN0IHBsdXJhbCA9IHRoaXMuZGVwcmVjYXRlZFBsdXJhbEZuID8gdGhpcy5kZXByZWNhdGVkUGx1cmFsRm4obG9jYWxlIHx8IHRoaXMubG9jYWxlLCB2YWx1ZSkgOlxyXG4gICAgICAgICAgICBnZXRMb2NhbGVQbHVyYWxDYXNlKGxvY2FsZSB8fCB0aGlzLmxvY2FsZSkodmFsdWUpO1xyXG4gICAgICAgIHN3aXRjaCAocGx1cmFsKSB7XHJcbiAgICAgICAgICAgIGNhc2UgUGx1cmFsLlplcm86XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3plcm8nO1xyXG4gICAgICAgICAgICBjYXNlIFBsdXJhbC5PbmU6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ29uZSc7XHJcbiAgICAgICAgICAgIGNhc2UgUGx1cmFsLlR3bzpcclxuICAgICAgICAgICAgICAgIHJldHVybiAndHdvJztcclxuICAgICAgICAgICAgY2FzZSBQbHVyYWwuRmV3OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdmZXcnO1xyXG4gICAgICAgICAgICBjYXNlIFBsdXJhbC5NYW55OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdtYW55JztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiAnb3RoZXInO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5OZ0xvY2FsZUxvY2FsaXphdGlvbi5kZWNvcmF0b3JzID0gW1xyXG4gICAgeyB0eXBlOiBJbmplY3RhYmxlIH1cclxuXTtcclxuLyoqIEBub2NvbGxhcHNlICovXHJcbk5nTG9jYWxlTG9jYWxpemF0aW9uLmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xyXG4gICAgeyB0eXBlOiBTdHJpbmcsIGRlY29yYXRvcnM6IFt7IHR5cGU6IEluamVjdCwgYXJnczogW0xPQ0FMRV9JRCxdIH1dIH0sXHJcbiAgICB7IHR5cGU6IHVuZGVmaW5lZCwgZGVjb3JhdG9yczogW3sgdHlwZTogT3B0aW9uYWwgfSwgeyB0eXBlOiBJbmplY3QsIGFyZ3M6IFtERVBSRUNBVEVEX1BMVVJBTF9GTixdIH1dIH1cclxuXTtcclxuaWYgKGZhbHNlKSB7XHJcbiAgICAvKipcclxuICAgICAqIEB0eXBlIHs/fVxyXG4gICAgICogQHByb3RlY3RlZFxyXG4gICAgICovXHJcbiAgICBOZ0xvY2FsZUxvY2FsaXphdGlvbi5wcm90b3R5cGUubG9jYWxlO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVwcmVjYXRlZCBmcm9tIHY1XHJcbiAgICAgKiBAdHlwZSB7P31cclxuICAgICAqIEBwcm90ZWN0ZWRcclxuICAgICAqL1xyXG4gICAgTmdMb2NhbGVMb2NhbGl6YXRpb24ucHJvdG90eXBlLmRlcHJlY2F0ZWRQbHVyYWxGbjtcclxufVxyXG4vKipcclxuICogUmV0dXJucyB0aGUgcGx1cmFsIGNhc2UgYmFzZWQgb24gdGhlIGxvY2FsZVxyXG4gKlxyXG4gKiBAZGVwcmVjYXRlZCBmcm9tIHY1IHRoZSBwbHVyYWwgY2FzZSBmdW5jdGlvbiBpcyBpbiBsb2NhbGUgZGF0YSBmaWxlcyBjb21tb24vbG9jYWxlcy8qLnRzXHJcbiAqIFxcQHB1YmxpY0FwaVxyXG4gKiBAcGFyYW0gez99IGxvY2FsZVxyXG4gKiBAcGFyYW0gez99IG5MaWtlXHJcbiAqIEByZXR1cm4gez99XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGx1cmFsQ2FzZShsb2NhbGUsIG5MaWtlKSB7XHJcbiAgICAvLyBUT0RPKHZpY2IpOiBsYXp5IGNvbXB1dGVcclxuICAgIGlmICh0eXBlb2Ygbkxpa2UgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgbkxpa2UgPSBwYXJzZUludCgoLyoqIEB0eXBlIHs/fSAqLyAobkxpa2UpKSwgMTApO1xyXG4gICAgfVxyXG4gICAgLyoqIEB0eXBlIHs/fSAqL1xyXG4gICAgY29uc3QgbiA9ICgvKiogQHR5cGUgez99ICovIChuTGlrZSkpO1xyXG4gICAgLyoqIEB0eXBlIHs/fSAqL1xyXG4gICAgY29uc3QgbkRlY2ltYWwgPSBuLnRvU3RyaW5nKCkucmVwbGFjZSgvXlteLl0qXFwuPy8sICcnKTtcclxuICAgIC8qKiBAdHlwZSB7P30gKi9cclxuICAgIGNvbnN0IGkgPSBNYXRoLmZsb29yKE1hdGguYWJzKG4pKTtcclxuICAgIC8qKiBAdHlwZSB7P30gKi9cclxuICAgIGNvbnN0IHYgPSBuRGVjaW1hbC5sZW5ndGg7XHJcbiAgICAvKiogQHR5cGUgez99ICovXHJcbiAgICBjb25zdCBmID0gcGFyc2VJbnQobkRlY2ltYWwsIDEwKTtcclxuICAgIC8qKiBAdHlwZSB7P30gKi9cclxuICAgIGNvbnN0IHQgPSBwYXJzZUludChuLnRvU3RyaW5nKCkucmVwbGFjZSgvXlteLl0qXFwuP3wwKyQvZywgJycpLCAxMCkgfHwgMDtcclxuICAgIC8qKiBAdHlwZSB7P30gKi9cclxuICAgIGNvbnN0IGxhbmcgPSBsb2NhbGUuc3BsaXQoJy0nKVswXS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgc3dpdGNoIChsYW5nKSB7XHJcbiAgICAgICAgY2FzZSAnYWYnOlxyXG4gICAgICAgIGNhc2UgJ2FzYSc6XHJcbiAgICAgICAgY2FzZSAnYXonOlxyXG4gICAgICAgIGNhc2UgJ2JlbSc6XHJcbiAgICAgICAgY2FzZSAnYmV6JzpcclxuICAgICAgICBjYXNlICdiZyc6XHJcbiAgICAgICAgY2FzZSAnYnJ4JzpcclxuICAgICAgICBjYXNlICdjZSc6XHJcbiAgICAgICAgY2FzZSAnY2dnJzpcclxuICAgICAgICBjYXNlICdjaHInOlxyXG4gICAgICAgIGNhc2UgJ2NrYic6XHJcbiAgICAgICAgY2FzZSAnZWUnOlxyXG4gICAgICAgIGNhc2UgJ2VsJzpcclxuICAgICAgICBjYXNlICdlbyc6XHJcbiAgICAgICAgY2FzZSAnZXMnOlxyXG4gICAgICAgIGNhc2UgJ2V1JzpcclxuICAgICAgICBjYXNlICdmbyc6XHJcbiAgICAgICAgY2FzZSAnZnVyJzpcclxuICAgICAgICBjYXNlICdnc3cnOlxyXG4gICAgICAgIGNhc2UgJ2hhJzpcclxuICAgICAgICBjYXNlICdoYXcnOlxyXG4gICAgICAgIGNhc2UgJ2h1JzpcclxuICAgICAgICBjYXNlICdqZ28nOlxyXG4gICAgICAgIGNhc2UgJ2ptYyc6XHJcbiAgICAgICAgY2FzZSAna2EnOlxyXG4gICAgICAgIGNhc2UgJ2trJzpcclxuICAgICAgICBjYXNlICdra2onOlxyXG4gICAgICAgIGNhc2UgJ2tsJzpcclxuICAgICAgICBjYXNlICdrcyc6XHJcbiAgICAgICAgY2FzZSAna3NiJzpcclxuICAgICAgICBjYXNlICdreSc6XHJcbiAgICAgICAgY2FzZSAnbGInOlxyXG4gICAgICAgIGNhc2UgJ2xnJzpcclxuICAgICAgICBjYXNlICdtYXMnOlxyXG4gICAgICAgIGNhc2UgJ21nbyc6XHJcbiAgICAgICAgY2FzZSAnbWwnOlxyXG4gICAgICAgIGNhc2UgJ21uJzpcclxuICAgICAgICBjYXNlICduYic6XHJcbiAgICAgICAgY2FzZSAnbmQnOlxyXG4gICAgICAgIGNhc2UgJ25lJzpcclxuICAgICAgICBjYXNlICdubic6XHJcbiAgICAgICAgY2FzZSAnbm5oJzpcclxuICAgICAgICBjYXNlICdueW4nOlxyXG4gICAgICAgIGNhc2UgJ29tJzpcclxuICAgICAgICBjYXNlICdvcic6XHJcbiAgICAgICAgY2FzZSAnb3MnOlxyXG4gICAgICAgIGNhc2UgJ3BzJzpcclxuICAgICAgICBjYXNlICdybSc6XHJcbiAgICAgICAgY2FzZSAncm9mJzpcclxuICAgICAgICBjYXNlICdyd2snOlxyXG4gICAgICAgIGNhc2UgJ3NhcSc6XHJcbiAgICAgICAgY2FzZSAnc2VoJzpcclxuICAgICAgICBjYXNlICdzbic6XHJcbiAgICAgICAgY2FzZSAnc28nOlxyXG4gICAgICAgIGNhc2UgJ3NxJzpcclxuICAgICAgICBjYXNlICd0YSc6XHJcbiAgICAgICAgY2FzZSAndGUnOlxyXG4gICAgICAgIGNhc2UgJ3Rlbyc6XHJcbiAgICAgICAgY2FzZSAndGsnOlxyXG4gICAgICAgIGNhc2UgJ3RyJzpcclxuICAgICAgICBjYXNlICd1Zyc6XHJcbiAgICAgICAgY2FzZSAndXonOlxyXG4gICAgICAgIGNhc2UgJ3ZvJzpcclxuICAgICAgICBjYXNlICd2dW4nOlxyXG4gICAgICAgIGNhc2UgJ3dhZSc6XHJcbiAgICAgICAgY2FzZSAneG9nJzpcclxuICAgICAgICAgICAgaWYgKG4gPT09IDEpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGx1cmFsLk9uZTtcclxuICAgICAgICAgICAgcmV0dXJuIFBsdXJhbC5PdGhlcjtcclxuICAgICAgICBjYXNlICdhayc6XHJcbiAgICAgICAgY2FzZSAnbG4nOlxyXG4gICAgICAgIGNhc2UgJ21nJzpcclxuICAgICAgICBjYXNlICdwYSc6XHJcbiAgICAgICAgY2FzZSAndGknOlxyXG4gICAgICAgICAgICBpZiAobiA9PT0gTWF0aC5mbG9vcihuKSAmJiBuID49IDAgJiYgbiA8PSAxKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBsdXJhbC5PbmU7XHJcbiAgICAgICAgICAgIHJldHVybiBQbHVyYWwuT3RoZXI7XHJcbiAgICAgICAgY2FzZSAnYW0nOlxyXG4gICAgICAgIGNhc2UgJ2FzJzpcclxuICAgICAgICBjYXNlICdibic6XHJcbiAgICAgICAgY2FzZSAnZmEnOlxyXG4gICAgICAgIGNhc2UgJ2d1JzpcclxuICAgICAgICBjYXNlICdoaSc6XHJcbiAgICAgICAgY2FzZSAna24nOlxyXG4gICAgICAgIGNhc2UgJ21yJzpcclxuICAgICAgICBjYXNlICd6dSc6XHJcbiAgICAgICAgICAgIGlmIChpID09PSAwIHx8IG4gPT09IDEpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGx1cmFsLk9uZTtcclxuICAgICAgICAgICAgcmV0dXJuIFBsdXJhbC5PdGhlcjtcclxuICAgICAgICBjYXNlICdhcic6XHJcbiAgICAgICAgICAgIGlmIChuID09PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBsdXJhbC5aZXJvO1xyXG4gICAgICAgICAgICBpZiAobiA9PT0gMSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBQbHVyYWwuT25lO1xyXG4gICAgICAgICAgICBpZiAobiA9PT0gMilcclxuICAgICAgICAgICAgICAgIHJldHVybiBQbHVyYWwuVHdvO1xyXG4gICAgICAgICAgICBpZiAobiAlIDEwMCA9PT0gTWF0aC5mbG9vcihuICUgMTAwKSAmJiBuICUgMTAwID49IDMgJiYgbiAlIDEwMCA8PSAxMClcclxuICAgICAgICAgICAgICAgIHJldHVybiBQbHVyYWwuRmV3O1xyXG4gICAgICAgICAgICBpZiAobiAlIDEwMCA9PT0gTWF0aC5mbG9vcihuICUgMTAwKSAmJiBuICUgMTAwID49IDExICYmIG4gJSAxMDAgPD0gOTkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGx1cmFsLk1hbnk7XHJcbiAgICAgICAgICAgIHJldHVybiBQbHVyYWwuT3RoZXI7XHJcbiAgICAgICAgY2FzZSAnYXN0JzpcclxuICAgICAgICBjYXNlICdjYSc6XHJcbiAgICAgICAgY2FzZSAnZGUnOlxyXG4gICAgICAgIGNhc2UgJ2VuJzpcclxuICAgICAgICBjYXNlICdldCc6XHJcbiAgICAgICAgY2FzZSAnZmknOlxyXG4gICAgICAgIGNhc2UgJ2Z5JzpcclxuICAgICAgICBjYXNlICdnbCc6XHJcbiAgICAgICAgY2FzZSAnaXQnOlxyXG4gICAgICAgIGNhc2UgJ25sJzpcclxuICAgICAgICBjYXNlICdzdic6XHJcbiAgICAgICAgY2FzZSAnc3cnOlxyXG4gICAgICAgIGNhc2UgJ3VyJzpcclxuICAgICAgICBjYXNlICd5aSc6XHJcbiAgICAgICAgICAgIGlmIChpID09PSAxICYmIHYgPT09IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGx1cmFsLk9uZTtcclxuICAgICAgICAgICAgcmV0dXJuIFBsdXJhbC5PdGhlcjtcclxuICAgICAgICBjYXNlICdiZSc6XHJcbiAgICAgICAgICAgIGlmIChuICUgMTAgPT09IDEgJiYgIShuICUgMTAwID09PSAxMSkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGx1cmFsLk9uZTtcclxuICAgICAgICAgICAgaWYgKG4gJSAxMCA9PT0gTWF0aC5mbG9vcihuICUgMTApICYmIG4gJSAxMCA+PSAyICYmIG4gJSAxMCA8PSA0ICYmXHJcbiAgICAgICAgICAgICAgICAhKG4gJSAxMDAgPj0gMTIgJiYgbiAlIDEwMCA8PSAxNCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGx1cmFsLkZldztcclxuICAgICAgICAgICAgaWYgKG4gJSAxMCA9PT0gMCB8fCBuICUgMTAgPT09IE1hdGguZmxvb3IobiAlIDEwKSAmJiBuICUgMTAgPj0gNSAmJiBuICUgMTAgPD0gOSB8fFxyXG4gICAgICAgICAgICAgICAgbiAlIDEwMCA9PT0gTWF0aC5mbG9vcihuICUgMTAwKSAmJiBuICUgMTAwID49IDExICYmIG4gJSAxMDAgPD0gMTQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGx1cmFsLk1hbnk7XHJcbiAgICAgICAgICAgIHJldHVybiBQbHVyYWwuT3RoZXI7XHJcbiAgICAgICAgY2FzZSAnYnInOlxyXG4gICAgICAgICAgICBpZiAobiAlIDEwID09PSAxICYmICEobiAlIDEwMCA9PT0gMTEgfHwgbiAlIDEwMCA9PT0gNzEgfHwgbiAlIDEwMCA9PT0gOTEpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBsdXJhbC5PbmU7XHJcbiAgICAgICAgICAgIGlmIChuICUgMTAgPT09IDIgJiYgIShuICUgMTAwID09PSAxMiB8fCBuICUgMTAwID09PSA3MiB8fCBuICUgMTAwID09PSA5MikpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGx1cmFsLlR3bztcclxuICAgICAgICAgICAgaWYgKG4gJSAxMCA9PT0gTWF0aC5mbG9vcihuICUgMTApICYmIChuICUgMTAgPj0gMyAmJiBuICUgMTAgPD0gNCB8fCBuICUgMTAgPT09IDkpICYmXHJcbiAgICAgICAgICAgICAgICAhKG4gJSAxMDAgPj0gMTAgJiYgbiAlIDEwMCA8PSAxOSB8fCBuICUgMTAwID49IDcwICYmIG4gJSAxMDAgPD0gNzkgfHxcclxuICAgICAgICAgICAgICAgICAgICBuICUgMTAwID49IDkwICYmIG4gJSAxMDAgPD0gOTkpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBsdXJhbC5GZXc7XHJcbiAgICAgICAgICAgIGlmICghKG4gPT09IDApICYmIG4gJSAxZTYgPT09IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGx1cmFsLk1hbnk7XHJcbiAgICAgICAgICAgIHJldHVybiBQbHVyYWwuT3RoZXI7XHJcbiAgICAgICAgY2FzZSAnYnMnOlxyXG4gICAgICAgIGNhc2UgJ2hyJzpcclxuICAgICAgICBjYXNlICdzcic6XHJcbiAgICAgICAgICAgIGlmICh2ID09PSAwICYmIGkgJSAxMCA9PT0gMSAmJiAhKGkgJSAxMDAgPT09IDExKSB8fCBmICUgMTAgPT09IDEgJiYgIShmICUgMTAwID09PSAxMSkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGx1cmFsLk9uZTtcclxuICAgICAgICAgICAgaWYgKHYgPT09IDAgJiYgaSAlIDEwID09PSBNYXRoLmZsb29yKGkgJSAxMCkgJiYgaSAlIDEwID49IDIgJiYgaSAlIDEwIDw9IDQgJiZcclxuICAgICAgICAgICAgICAgICEoaSAlIDEwMCA+PSAxMiAmJiBpICUgMTAwIDw9IDE0KSB8fFxyXG4gICAgICAgICAgICAgICAgZiAlIDEwID09PSBNYXRoLmZsb29yKGYgJSAxMCkgJiYgZiAlIDEwID49IDIgJiYgZiAlIDEwIDw9IDQgJiZcclxuICAgICAgICAgICAgICAgICAgICAhKGYgJSAxMDAgPj0gMTIgJiYgZiAlIDEwMCA8PSAxNCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGx1cmFsLkZldztcclxuICAgICAgICAgICAgcmV0dXJuIFBsdXJhbC5PdGhlcjtcclxuICAgICAgICBjYXNlICdjcyc6XHJcbiAgICAgICAgY2FzZSAnc2snOlxyXG4gICAgICAgICAgICBpZiAoaSA9PT0gMSAmJiB2ID09PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBsdXJhbC5PbmU7XHJcbiAgICAgICAgICAgIGlmIChpID09PSBNYXRoLmZsb29yKGkpICYmIGkgPj0gMiAmJiBpIDw9IDQgJiYgdiA9PT0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybiBQbHVyYWwuRmV3O1xyXG4gICAgICAgICAgICBpZiAoISh2ID09PSAwKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBQbHVyYWwuTWFueTtcclxuICAgICAgICAgICAgcmV0dXJuIFBsdXJhbC5PdGhlcjtcclxuICAgICAgICBjYXNlICdjeSc6XHJcbiAgICAgICAgICAgIGlmIChuID09PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBsdXJhbC5aZXJvO1xyXG4gICAgICAgICAgICBpZiAobiA9PT0gMSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBQbHVyYWwuT25lO1xyXG4gICAgICAgICAgICBpZiAobiA9PT0gMilcclxuICAgICAgICAgICAgICAgIHJldHVybiBQbHVyYWwuVHdvO1xyXG4gICAgICAgICAgICBpZiAobiA9PT0gMylcclxuICAgICAgICAgICAgICAgIHJldHVybiBQbHVyYWwuRmV3O1xyXG4gICAgICAgICAgICBpZiAobiA9PT0gNilcclxuICAgICAgICAgICAgICAgIHJldHVybiBQbHVyYWwuTWFueTtcclxuICAgICAgICAgICAgcmV0dXJuIFBsdXJhbC5PdGhlcjtcclxuICAgICAgICBjYXNlICdkYSc6XHJcbiAgICAgICAgICAgIGlmIChuID09PSAxIHx8ICEodCA9PT0gMCkgJiYgKGkgPT09IDAgfHwgaSA9PT0gMSkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGx1cmFsLk9uZTtcclxuICAgICAgICAgICAgcmV0dXJuIFBsdXJhbC5PdGhlcjtcclxuICAgICAgICBjYXNlICdkc2InOlxyXG4gICAgICAgIGNhc2UgJ2hzYic6XHJcbiAgICAgICAgICAgIGlmICh2ID09PSAwICYmIGkgJSAxMDAgPT09IDEgfHwgZiAlIDEwMCA9PT0gMSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBQbHVyYWwuT25lO1xyXG4gICAgICAgICAgICBpZiAodiA9PT0gMCAmJiBpICUgMTAwID09PSAyIHx8IGYgJSAxMDAgPT09IDIpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGx1cmFsLlR3bztcclxuICAgICAgICAgICAgaWYgKHYgPT09IDAgJiYgaSAlIDEwMCA9PT0gTWF0aC5mbG9vcihpICUgMTAwKSAmJiBpICUgMTAwID49IDMgJiYgaSAlIDEwMCA8PSA0IHx8XHJcbiAgICAgICAgICAgICAgICBmICUgMTAwID09PSBNYXRoLmZsb29yKGYgJSAxMDApICYmIGYgJSAxMDAgPj0gMyAmJiBmICUgMTAwIDw9IDQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGx1cmFsLkZldztcclxuICAgICAgICAgICAgcmV0dXJuIFBsdXJhbC5PdGhlcjtcclxuICAgICAgICBjYXNlICdmZic6XHJcbiAgICAgICAgY2FzZSAnZnInOlxyXG4gICAgICAgIGNhc2UgJ2h5JzpcclxuICAgICAgICBjYXNlICdrYWInOlxyXG4gICAgICAgICAgICBpZiAoaSA9PT0gMCB8fCBpID09PSAxKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBsdXJhbC5PbmU7XHJcbiAgICAgICAgICAgIHJldHVybiBQbHVyYWwuT3RoZXI7XHJcbiAgICAgICAgY2FzZSAnZmlsJzpcclxuICAgICAgICAgICAgaWYgKHYgPT09IDAgJiYgKGkgPT09IDEgfHwgaSA9PT0gMiB8fCBpID09PSAzKSB8fFxyXG4gICAgICAgICAgICAgICAgdiA9PT0gMCAmJiAhKGkgJSAxMCA9PT0gNCB8fCBpICUgMTAgPT09IDYgfHwgaSAlIDEwID09PSA5KSB8fFxyXG4gICAgICAgICAgICAgICAgISh2ID09PSAwKSAmJiAhKGYgJSAxMCA9PT0gNCB8fCBmICUgMTAgPT09IDYgfHwgZiAlIDEwID09PSA5KSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBQbHVyYWwuT25lO1xyXG4gICAgICAgICAgICByZXR1cm4gUGx1cmFsLk90aGVyO1xyXG4gICAgICAgIGNhc2UgJ2dhJzpcclxuICAgICAgICAgICAgaWYgKG4gPT09IDEpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGx1cmFsLk9uZTtcclxuICAgICAgICAgICAgaWYgKG4gPT09IDIpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGx1cmFsLlR3bztcclxuICAgICAgICAgICAgaWYgKG4gPT09IE1hdGguZmxvb3IobikgJiYgbiA+PSAzICYmIG4gPD0gNilcclxuICAgICAgICAgICAgICAgIHJldHVybiBQbHVyYWwuRmV3O1xyXG4gICAgICAgICAgICBpZiAobiA9PT0gTWF0aC5mbG9vcihuKSAmJiBuID49IDcgJiYgbiA8PSAxMClcclxuICAgICAgICAgICAgICAgIHJldHVybiBQbHVyYWwuTWFueTtcclxuICAgICAgICAgICAgcmV0dXJuIFBsdXJhbC5PdGhlcjtcclxuICAgICAgICBjYXNlICdnZCc6XHJcbiAgICAgICAgICAgIGlmIChuID09PSAxIHx8IG4gPT09IDExKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBsdXJhbC5PbmU7XHJcbiAgICAgICAgICAgIGlmIChuID09PSAyIHx8IG4gPT09IDEyKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBsdXJhbC5Ud287XHJcbiAgICAgICAgICAgIGlmIChuID09PSBNYXRoLmZsb29yKG4pICYmIChuID49IDMgJiYgbiA8PSAxMCB8fCBuID49IDEzICYmIG4gPD0gMTkpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBsdXJhbC5GZXc7XHJcbiAgICAgICAgICAgIHJldHVybiBQbHVyYWwuT3RoZXI7XHJcbiAgICAgICAgY2FzZSAnZ3YnOlxyXG4gICAgICAgICAgICBpZiAodiA9PT0gMCAmJiBpICUgMTAgPT09IDEpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGx1cmFsLk9uZTtcclxuICAgICAgICAgICAgaWYgKHYgPT09IDAgJiYgaSAlIDEwID09PSAyKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBsdXJhbC5Ud287XHJcbiAgICAgICAgICAgIGlmICh2ID09PSAwICYmXHJcbiAgICAgICAgICAgICAgICAoaSAlIDEwMCA9PT0gMCB8fCBpICUgMTAwID09PSAyMCB8fCBpICUgMTAwID09PSA0MCB8fCBpICUgMTAwID09PSA2MCB8fCBpICUgMTAwID09PSA4MCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGx1cmFsLkZldztcclxuICAgICAgICAgICAgaWYgKCEodiA9PT0gMCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGx1cmFsLk1hbnk7XHJcbiAgICAgICAgICAgIHJldHVybiBQbHVyYWwuT3RoZXI7XHJcbiAgICAgICAgY2FzZSAnaGUnOlxyXG4gICAgICAgICAgICBpZiAoaSA9PT0gMSAmJiB2ID09PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBsdXJhbC5PbmU7XHJcbiAgICAgICAgICAgIGlmIChpID09PSAyICYmIHYgPT09IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGx1cmFsLlR3bztcclxuICAgICAgICAgICAgaWYgKHYgPT09IDAgJiYgIShuID49IDAgJiYgbiA8PSAxMCkgJiYgbiAlIDEwID09PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBsdXJhbC5NYW55O1xyXG4gICAgICAgICAgICByZXR1cm4gUGx1cmFsLk90aGVyO1xyXG4gICAgICAgIGNhc2UgJ2lzJzpcclxuICAgICAgICAgICAgaWYgKHQgPT09IDAgJiYgaSAlIDEwID09PSAxICYmICEoaSAlIDEwMCA9PT0gMTEpIHx8ICEodCA9PT0gMCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGx1cmFsLk9uZTtcclxuICAgICAgICAgICAgcmV0dXJuIFBsdXJhbC5PdGhlcjtcclxuICAgICAgICBjYXNlICdrc2gnOlxyXG4gICAgICAgICAgICBpZiAobiA9PT0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybiBQbHVyYWwuWmVybztcclxuICAgICAgICAgICAgaWYgKG4gPT09IDEpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGx1cmFsLk9uZTtcclxuICAgICAgICAgICAgcmV0dXJuIFBsdXJhbC5PdGhlcjtcclxuICAgICAgICBjYXNlICdrdyc6XHJcbiAgICAgICAgY2FzZSAnbmFxJzpcclxuICAgICAgICBjYXNlICdzZSc6XHJcbiAgICAgICAgY2FzZSAnc21uJzpcclxuICAgICAgICAgICAgaWYgKG4gPT09IDEpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGx1cmFsLk9uZTtcclxuICAgICAgICAgICAgaWYgKG4gPT09IDIpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGx1cmFsLlR3bztcclxuICAgICAgICAgICAgcmV0dXJuIFBsdXJhbC5PdGhlcjtcclxuICAgICAgICBjYXNlICdsYWcnOlxyXG4gICAgICAgICAgICBpZiAobiA9PT0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybiBQbHVyYWwuWmVybztcclxuICAgICAgICAgICAgaWYgKChpID09PSAwIHx8IGkgPT09IDEpICYmICEobiA9PT0gMCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGx1cmFsLk9uZTtcclxuICAgICAgICAgICAgcmV0dXJuIFBsdXJhbC5PdGhlcjtcclxuICAgICAgICBjYXNlICdsdCc6XHJcbiAgICAgICAgICAgIGlmIChuICUgMTAgPT09IDEgJiYgIShuICUgMTAwID49IDExICYmIG4gJSAxMDAgPD0gMTkpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBsdXJhbC5PbmU7XHJcbiAgICAgICAgICAgIGlmIChuICUgMTAgPT09IE1hdGguZmxvb3IobiAlIDEwKSAmJiBuICUgMTAgPj0gMiAmJiBuICUgMTAgPD0gOSAmJlxyXG4gICAgICAgICAgICAgICAgIShuICUgMTAwID49IDExICYmIG4gJSAxMDAgPD0gMTkpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBsdXJhbC5GZXc7XHJcbiAgICAgICAgICAgIGlmICghKGYgPT09IDApKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBsdXJhbC5NYW55O1xyXG4gICAgICAgICAgICByZXR1cm4gUGx1cmFsLk90aGVyO1xyXG4gICAgICAgIGNhc2UgJ2x2JzpcclxuICAgICAgICBjYXNlICdwcmcnOlxyXG4gICAgICAgICAgICBpZiAobiAlIDEwID09PSAwIHx8IG4gJSAxMDAgPT09IE1hdGguZmxvb3IobiAlIDEwMCkgJiYgbiAlIDEwMCA+PSAxMSAmJiBuICUgMTAwIDw9IDE5IHx8XHJcbiAgICAgICAgICAgICAgICB2ID09PSAyICYmIGYgJSAxMDAgPT09IE1hdGguZmxvb3IoZiAlIDEwMCkgJiYgZiAlIDEwMCA+PSAxMSAmJiBmICUgMTAwIDw9IDE5KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBsdXJhbC5aZXJvO1xyXG4gICAgICAgICAgICBpZiAobiAlIDEwID09PSAxICYmICEobiAlIDEwMCA9PT0gMTEpIHx8IHYgPT09IDIgJiYgZiAlIDEwID09PSAxICYmICEoZiAlIDEwMCA9PT0gMTEpIHx8XHJcbiAgICAgICAgICAgICAgICAhKHYgPT09IDIpICYmIGYgJSAxMCA9PT0gMSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBQbHVyYWwuT25lO1xyXG4gICAgICAgICAgICByZXR1cm4gUGx1cmFsLk90aGVyO1xyXG4gICAgICAgIGNhc2UgJ21rJzpcclxuICAgICAgICAgICAgaWYgKHYgPT09IDAgJiYgaSAlIDEwID09PSAxIHx8IGYgJSAxMCA9PT0gMSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBQbHVyYWwuT25lO1xyXG4gICAgICAgICAgICByZXR1cm4gUGx1cmFsLk90aGVyO1xyXG4gICAgICAgIGNhc2UgJ210JzpcclxuICAgICAgICAgICAgaWYgKG4gPT09IDEpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGx1cmFsLk9uZTtcclxuICAgICAgICAgICAgaWYgKG4gPT09IDAgfHwgbiAlIDEwMCA9PT0gTWF0aC5mbG9vcihuICUgMTAwKSAmJiBuICUgMTAwID49IDIgJiYgbiAlIDEwMCA8PSAxMClcclxuICAgICAgICAgICAgICAgIHJldHVybiBQbHVyYWwuRmV3O1xyXG4gICAgICAgICAgICBpZiAobiAlIDEwMCA9PT0gTWF0aC5mbG9vcihuICUgMTAwKSAmJiBuICUgMTAwID49IDExICYmIG4gJSAxMDAgPD0gMTkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGx1cmFsLk1hbnk7XHJcbiAgICAgICAgICAgIHJldHVybiBQbHVyYWwuT3RoZXI7XHJcbiAgICAgICAgY2FzZSAncGwnOlxyXG4gICAgICAgICAgICBpZiAoaSA9PT0gMSAmJiB2ID09PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBsdXJhbC5PbmU7XHJcbiAgICAgICAgICAgIGlmICh2ID09PSAwICYmIGkgJSAxMCA9PT0gTWF0aC5mbG9vcihpICUgMTApICYmIGkgJSAxMCA+PSAyICYmIGkgJSAxMCA8PSA0ICYmXHJcbiAgICAgICAgICAgICAgICAhKGkgJSAxMDAgPj0gMTIgJiYgaSAlIDEwMCA8PSAxNCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGx1cmFsLkZldztcclxuICAgICAgICAgICAgaWYgKHYgPT09IDAgJiYgIShpID09PSAxKSAmJiBpICUgMTAgPT09IE1hdGguZmxvb3IoaSAlIDEwKSAmJiBpICUgMTAgPj0gMCAmJiBpICUgMTAgPD0gMSB8fFxyXG4gICAgICAgICAgICAgICAgdiA9PT0gMCAmJiBpICUgMTAgPT09IE1hdGguZmxvb3IoaSAlIDEwKSAmJiBpICUgMTAgPj0gNSAmJiBpICUgMTAgPD0gOSB8fFxyXG4gICAgICAgICAgICAgICAgdiA9PT0gMCAmJiBpICUgMTAwID09PSBNYXRoLmZsb29yKGkgJSAxMDApICYmIGkgJSAxMDAgPj0gMTIgJiYgaSAlIDEwMCA8PSAxNClcclxuICAgICAgICAgICAgICAgIHJldHVybiBQbHVyYWwuTWFueTtcclxuICAgICAgICAgICAgcmV0dXJuIFBsdXJhbC5PdGhlcjtcclxuICAgICAgICBjYXNlICdwdCc6XHJcbiAgICAgICAgICAgIGlmIChuID09PSBNYXRoLmZsb29yKG4pICYmIG4gPj0gMCAmJiBuIDw9IDIgJiYgIShuID09PSAyKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBQbHVyYWwuT25lO1xyXG4gICAgICAgICAgICByZXR1cm4gUGx1cmFsLk90aGVyO1xyXG4gICAgICAgIGNhc2UgJ3JvJzpcclxuICAgICAgICAgICAgaWYgKGkgPT09IDEgJiYgdiA9PT0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybiBQbHVyYWwuT25lO1xyXG4gICAgICAgICAgICBpZiAoISh2ID09PSAwKSB8fCBuID09PSAwIHx8XHJcbiAgICAgICAgICAgICAgICAhKG4gPT09IDEpICYmIG4gJSAxMDAgPT09IE1hdGguZmxvb3IobiAlIDEwMCkgJiYgbiAlIDEwMCA+PSAxICYmIG4gJSAxMDAgPD0gMTkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGx1cmFsLkZldztcclxuICAgICAgICAgICAgcmV0dXJuIFBsdXJhbC5PdGhlcjtcclxuICAgICAgICBjYXNlICdydSc6XHJcbiAgICAgICAgY2FzZSAndWsnOlxyXG4gICAgICAgICAgICBpZiAodiA9PT0gMCAmJiBpICUgMTAgPT09IDEgJiYgIShpICUgMTAwID09PSAxMSkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGx1cmFsLk9uZTtcclxuICAgICAgICAgICAgaWYgKHYgPT09IDAgJiYgaSAlIDEwID09PSBNYXRoLmZsb29yKGkgJSAxMCkgJiYgaSAlIDEwID49IDIgJiYgaSAlIDEwIDw9IDQgJiZcclxuICAgICAgICAgICAgICAgICEoaSAlIDEwMCA+PSAxMiAmJiBpICUgMTAwIDw9IDE0KSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBQbHVyYWwuRmV3O1xyXG4gICAgICAgICAgICBpZiAodiA9PT0gMCAmJiBpICUgMTAgPT09IDAgfHxcclxuICAgICAgICAgICAgICAgIHYgPT09IDAgJiYgaSAlIDEwID09PSBNYXRoLmZsb29yKGkgJSAxMCkgJiYgaSAlIDEwID49IDUgJiYgaSAlIDEwIDw9IDkgfHxcclxuICAgICAgICAgICAgICAgIHYgPT09IDAgJiYgaSAlIDEwMCA9PT0gTWF0aC5mbG9vcihpICUgMTAwKSAmJiBpICUgMTAwID49IDExICYmIGkgJSAxMDAgPD0gMTQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGx1cmFsLk1hbnk7XHJcbiAgICAgICAgICAgIHJldHVybiBQbHVyYWwuT3RoZXI7XHJcbiAgICAgICAgY2FzZSAnc2hpJzpcclxuICAgICAgICAgICAgaWYgKGkgPT09IDAgfHwgbiA9PT0gMSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBQbHVyYWwuT25lO1xyXG4gICAgICAgICAgICBpZiAobiA9PT0gTWF0aC5mbG9vcihuKSAmJiBuID49IDIgJiYgbiA8PSAxMClcclxuICAgICAgICAgICAgICAgIHJldHVybiBQbHVyYWwuRmV3O1xyXG4gICAgICAgICAgICByZXR1cm4gUGx1cmFsLk90aGVyO1xyXG4gICAgICAgIGNhc2UgJ3NpJzpcclxuICAgICAgICAgICAgaWYgKG4gPT09IDAgfHwgbiA9PT0gMSB8fCBpID09PSAwICYmIGYgPT09IDEpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGx1cmFsLk9uZTtcclxuICAgICAgICAgICAgcmV0dXJuIFBsdXJhbC5PdGhlcjtcclxuICAgICAgICBjYXNlICdzbCc6XHJcbiAgICAgICAgICAgIGlmICh2ID09PSAwICYmIGkgJSAxMDAgPT09IDEpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGx1cmFsLk9uZTtcclxuICAgICAgICAgICAgaWYgKHYgPT09IDAgJiYgaSAlIDEwMCA9PT0gMilcclxuICAgICAgICAgICAgICAgIHJldHVybiBQbHVyYWwuVHdvO1xyXG4gICAgICAgICAgICBpZiAodiA9PT0gMCAmJiBpICUgMTAwID09PSBNYXRoLmZsb29yKGkgJSAxMDApICYmIGkgJSAxMDAgPj0gMyAmJiBpICUgMTAwIDw9IDQgfHwgISh2ID09PSAwKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBQbHVyYWwuRmV3O1xyXG4gICAgICAgICAgICByZXR1cm4gUGx1cmFsLk90aGVyO1xyXG4gICAgICAgIGNhc2UgJ3R6bSc6XHJcbiAgICAgICAgICAgIGlmIChuID09PSBNYXRoLmZsb29yKG4pICYmIG4gPj0gMCAmJiBuIDw9IDEgfHwgbiA9PT0gTWF0aC5mbG9vcihuKSAmJiBuID49IDExICYmIG4gPD0gOTkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGx1cmFsLk9uZTtcclxuICAgICAgICAgICAgcmV0dXJuIFBsdXJhbC5PdGhlcjtcclxuICAgICAgICAvLyBXaGVuIHRoZXJlIGlzIG5vIHNwZWNpZmljYXRpb24sIHRoZSBkZWZhdWx0IGlzIGFsd2F5cyBcIm90aGVyXCJcclxuICAgICAgICAvLyBTcGVjOiBodHRwOi8vY2xkci51bmljb2RlLm9yZy9pbmRleC9jbGRyLXNwZWMvcGx1cmFsLXJ1bGVzXHJcbiAgICAgICAgLy8gPiBvdGhlciAocmVxdWlyZWTigJRnZW5lcmFsIHBsdXJhbCBmb3JtIOKAlCBhbHNvIHVzZWQgaWYgdGhlIGxhbmd1YWdlIG9ubHkgaGFzIGEgc2luZ2xlIGZvcm0pXHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIFBsdXJhbC5PdGhlcjtcclxuICAgIH1cclxufVxyIl19