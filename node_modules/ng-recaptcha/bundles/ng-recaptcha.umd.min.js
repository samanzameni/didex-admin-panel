!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("rxjs"),require("@angular/forms")):"function"==typeof define&&define.amd?define("ng-recaptcha",["exports","@angular/core","@angular/common","rxjs","@angular/forms"],t):t((e=e||self)["ng-recaptcha"]={},e.ng.core,e.ng.common,e.rxjs,e.ng.forms)}(this,function(e,t,n,i,o){"use strict";function r(e,t,n,i){var o,r=arguments.length,c=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(c=(r<3?o(c):r>3?o(t,n,c):o(t,n))||c);return r>3&&c&&Object.defineProperty(t,n,c),c}function c(e,t){return function(n,i){t(n,i,e)}}function a(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}var s=new t.InjectionToken("recaptcha-language"),u=new t.InjectionToken("recaptcha-base-url"),p=new t.InjectionToken("recaptcha-nonce-tag");function h(e,t,n,i,o){window.ng2recaptchaloaded=function(){t(grecaptcha)};var r=document.createElement("script");r.innerHTML="";var c=i||"https://www.google.com/recaptcha/api.js";r.src=c+"?render="+e+"&onload=ng2recaptchaloaded"+n,o&&(r.nonce=o),r.async=!0,r.defer=!0,document.head.appendChild(r)}var l=function(){function e(e,t,r,c){this.platformId=e,this.language=t,this.baseUrl=r,this.nonce=c,this.init(),this.ready=n.isPlatformBrowser(this.platformId)?o.ready.asObservable():i.of()}return o=e,e.prototype.init=function(){if(!o.ready&&n.isPlatformBrowser(this.platformId)){var e=new i.BehaviorSubject(null);o.ready=e,h("explicit",function(t){return e.next(t)},this.language?"&hl="+this.language:"",this.baseUrl,this.nonce)}},e.ready=null,e=o=r([t.Injectable(),c(0,t.Inject(t.PLATFORM_ID)),c(1,t.Optional()),c(1,t.Inject(s)),c(2,t.Optional()),c(2,t.Inject(u)),c(3,t.Optional()),c(3,t.Inject(p)),a("design:paramtypes",[Object,String,String,String])],e);var o}(),d=new t.InjectionToken("recaptcha-settings"),f=0,g=function(){function e(e,n,i,o){this.elementRef=e,this.loader=n,this.zone=i,this.id="ngrecaptcha-"+f++,this.resolved=new t.EventEmitter,o&&(this.siteKey=o.siteKey,this.theme=o.theme,this.type=o.type,this.size=o.size,this.badge=o.badge)}return e.prototype.ngAfterViewInit=function(){var e=this;this.subscription=this.loader.ready.subscribe(function(t){null!=t&&t.render instanceof Function&&(e.grecaptcha=t,e.renderRecaptcha())})},e.prototype.ngOnDestroy=function(){this.grecaptchaReset(),this.subscription&&this.subscription.unsubscribe()},e.prototype.execute=function(){"invisible"===this.size&&(null!=this.widget?this.grecaptcha.execute(this.widget):this.executeRequested=!0)},e.prototype.reset=function(){null!=this.widget&&(this.grecaptcha.getResponse(this.widget)&&this.resolved.emit(null),this.grecaptchaReset())},e.prototype.expired=function(){this.resolved.emit(null)},e.prototype.captchaResponseCallback=function(e){this.resolved.emit(e)},e.prototype.grecaptchaReset=function(){var e=this;null!=this.widget&&this.zone.runOutsideAngular(function(){return e.grecaptcha.reset(e.widget)})},e.prototype.renderRecaptcha=function(){var e=this;this.widget=this.grecaptcha.render(this.elementRef.nativeElement,{badge:this.badge,callback:function(t){e.zone.run(function(){return e.captchaResponseCallback(t)})},"expired-callback":function(){e.zone.run(function(){return e.expired()})},sitekey:this.siteKey,size:this.size,tabindex:this.tabIndex,theme:this.theme,type:this.type}),!0===this.executeRequested&&(this.executeRequested=!1,this.execute())},r([t.Input(),t.HostBinding("attr.id"),a("design:type",Object)],e.prototype,"id",void 0),r([t.Input(),a("design:type",String)],e.prototype,"siteKey",void 0),r([t.Input(),a("design:type",String)],e.prototype,"theme",void 0),r([t.Input(),a("design:type",String)],e.prototype,"type",void 0),r([t.Input(),a("design:type",String)],e.prototype,"size",void 0),r([t.Input(),a("design:type",Number)],e.prototype,"tabIndex",void 0),r([t.Input(),a("design:type",String)],e.prototype,"badge",void 0),r([t.Output(),a("design:type",Object)],e.prototype,"resolved",void 0),e=r([t.Component({exportAs:"reCaptcha",selector:"re-captcha",template:""}),c(3,t.Optional()),c(3,t.Inject(d)),a("design:paramtypes",[t.ElementRef,l,t.NgZone,Object])],e)}(),y=function(){function e(){}return e=r([t.NgModule({declarations:[g],exports:[g]})],e)}(),b=function(){function e(){}return n=e,e.forRoot=function(){return n},e=n=r([t.NgModule({exports:[g],imports:[y],providers:[l]})],e);var n}(),m=new t.InjectionToken("recaptcha-v3-site-key"),v=function(){function e(e,t,i,o,r){var c=this;this.onLoadComplete=function(e){c.grecaptcha=e,c.actionBacklog&&c.actionBacklog.length>0&&(c.actionBacklog.forEach(function(e){var t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)c.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r["return"])&&n.call(r)}finally{if(o)throw o.error}}return c}(e,2),n=t[0],i=t[1];return c.executeActionWithSubject(n,i)}),c.actionBacklog=undefined)},this.zone=e,this.isBrowser=n.isPlatformBrowser(i),this.siteKey=t,this.nonce=r,this.baseUrl=o,this.init()}return Object.defineProperty(e.prototype,"onExecute",{get:function(){return this.onExecuteSubject||(this.onExecuteSubject=new i.Subject,this.onExecuteObservable=this.onExecuteSubject.asObservable()),this.onExecuteObservable},enumerable:!0,configurable:!0}),e.prototype.execute=function(e){var t=new i.Subject;return this.isBrowser&&(this.grecaptcha?this.executeActionWithSubject(e,t):(this.actionBacklog||(this.actionBacklog=[]),this.actionBacklog.push([e,t]))),t.asObservable()},e.prototype.executeActionWithSubject=function(e,t){var n=this;this.zone.runOutsideAngular(function(){n.grecaptcha.execute(n.siteKey,{action:e}).then(function(i){n.zone.run(function(){t.next(i),t.complete(),n.onExecuteSubject&&n.onExecuteSubject.next({action:e,token:i})})})})},e.prototype.init=function(){this.isBrowser&&("grecaptcha"in window?this.grecaptcha=grecaptcha:h(this.siteKey,this.onLoadComplete,"",this.baseUrl,this.nonce))},e=r([t.Injectable(),c(1,t.Inject(m)),c(2,t.Inject(t.PLATFORM_ID)),c(3,t.Optional()),c(3,t.Inject(u)),c(4,t.Optional()),c(4,t.Inject(p)),a("design:paramtypes",[t.NgZone,String,Object,String,String])],e)}(),j=function(){function e(){}return e=r([t.NgModule({providers:[v]})],e)}(),x=function(){function e(e){this.host=e}return n=e,e.prototype.writeValue=function(e){e||this.host.reset()},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.onResolve=function(e){this.onChange&&this.onChange(e),this.onTouched&&this.onTouched()},r([t.HostListener("resolved",["$event"]),a("design:type",Function),a("design:paramtypes",[String]),a("design:returntype",void 0)],e.prototype,"onResolve",null),e=n=r([t.Directive({providers:[{multi:!0,provide:o.NG_VALUE_ACCESSOR,useExisting:t.forwardRef(function(){return n})}],selector:"re-captcha[formControlName],re-captcha[formControl],re-captcha[ngModel]"}),a("design:paramtypes",[g])],e);var n}(),R=function(){function e(){}return e=r([t.NgModule({declarations:[x],exports:[x],imports:[o.FormsModule,y]})],e)}();e.RECAPTCHA_BASE_URL=u,e.RECAPTCHA_LANGUAGE=s,e.RECAPTCHA_NONCE=p,e.RECAPTCHA_SETTINGS=d,e.RECAPTCHA_V3_SITE_KEY=m,e.ReCaptchaV3Service=v,e.RecaptchaComponent=g,e.RecaptchaFormsModule=R,e.RecaptchaLoaderService=l,e.RecaptchaModule=b,e.RecaptchaV3Module=j,e.RecaptchaValueAccessorDirective=x,e.Éµa=y,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ng-recaptcha.umd.min.js.map